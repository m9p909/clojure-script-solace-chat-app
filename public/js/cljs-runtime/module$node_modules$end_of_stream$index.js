shadow$provide.module$node_modules$end_of_stream$index=function(global,require,module,exports){var process=require("module$node_modules$process$browser"),once=require("module$node_modules$once$once"),noop=function(){},isChildProcess=function(stream){return stream.stdio&&Array.isArray(stream.stdio)&&3===stream.stdio.length},eos=function(stream,opts,callback){if("function"===typeof opts)return eos(stream,null,opts);opts||(opts={});callback=once(callback||noop);var ws=stream._writableState,rs=stream._readableState,
readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,cancelled=!1,onlegacyfinish=function(){stream.writable||onfinish()},onfinish=function(){writable=!1;readable||callback.call(stream)},onend=function(){readable=!1;writable||callback.call(stream)},onexit=function(exitCode){callback.call(stream,exitCode?Error("exited with error code: "+exitCode):null)},onerror=function(err){callback.call(stream,err)},onclose=function(){process.nextTick(onclosenexttick)},
onclosenexttick=function(){if(!cancelled&&(readable&&(!rs||!rs.ended||rs.destroyed)||writable&&(!ws||!ws.ended||ws.destroyed)))return callback.call(stream,Error("premature close"))},onrequest=function(){stream.req.on("finish",onfinish)};if(stream.setHeader&&"function"===typeof stream.abort)if(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req)onrequest();else stream.on("request",onrequest);else writable&&!ws&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish));if(isChildProcess(stream))stream.on("exit",
onexit);stream.on("end",onend);stream.on("finish",onfinish);if(!1!==opts.error)stream.on("error",onerror);stream.on("close",onclose);return function(){cancelled=!0;stream.removeListener("complete",onfinish);stream.removeListener("abort",onclose);stream.removeListener("request",onrequest);stream.req&&stream.req.removeListener("finish",onfinish);stream.removeListener("end",onlegacyfinish);stream.removeListener("close",onlegacyfinish);stream.removeListener("finish",onfinish);stream.removeListener("exit",
onexit);stream.removeListener("end",onend);stream.removeListener("error",onerror);stream.removeListener("close",onclose)}};module.exports=eos}
//# sourceMappingURL=module$node_modules$end_of_stream$index.js.map
