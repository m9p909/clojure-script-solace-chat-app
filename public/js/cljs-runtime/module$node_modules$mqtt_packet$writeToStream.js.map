{
"version":3,
"file":"module$node_modules$mqtt_packet$writeToStream.js",
"lineCount":40,
"mappings":"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",
"sources":["node_modules/mqtt-packet/writeToStream.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mqtt_packet$writeToStream\"] = function(global,require,module,exports) {\nvar Buffer = require('buffer').Buffer;\nconst protocol = require('./constants')\nconst empty = Buffer.allocUnsafe(0)\nconst zeroBuf = Buffer.from([0])\nconst numbers = require('./numbers')\nconst nextTick = require('process-nextick-args').nextTick\nconst debug = require('debug')('mqtt-packet:writeToStream')\n\nconst numCache = numbers.cache\nconst generateNumber = numbers.generateNumber\nconst generateCache = numbers.generateCache\nconst genBufVariableByteInt = numbers.genBufVariableByteInt\nconst generate4ByteBuffer = numbers.generate4ByteBuffer\nlet writeNumber = writeNumberCached\nlet toGenerate = true\n\nfunction generate (packet, stream, opts) {\n  debug('generate called')\n  if (stream.cork) {\n    stream.cork()\n    nextTick(uncork, stream)\n  }\n\n  if (toGenerate) {\n    toGenerate = false\n    generateCache()\n  }\n  debug('generate: packet.cmd: %s', packet.cmd)\n  switch (packet.cmd) {\n    case 'connect':\n      return connect(packet, stream, opts)\n    case 'connack':\n      return connack(packet, stream, opts)\n    case 'publish':\n      return publish(packet, stream, opts)\n    case 'puback':\n    case 'pubrec':\n    case 'pubrel':\n    case 'pubcomp':\n      return confirmation(packet, stream, opts)\n    case 'subscribe':\n      return subscribe(packet, stream, opts)\n    case 'suback':\n      return suback(packet, stream, opts)\n    case 'unsubscribe':\n      return unsubscribe(packet, stream, opts)\n    case 'unsuback':\n      return unsuback(packet, stream, opts)\n    case 'pingreq':\n    case 'pingresp':\n      return emptyPacket(packet, stream, opts)\n    case 'disconnect':\n      return disconnect(packet, stream, opts)\n    case 'auth':\n      return auth(packet, stream, opts)\n    default:\n      stream.emit('error', new Error('Unknown command'))\n      return false\n  }\n}\n/**\n * Controls numbers cache.\n * Set to \"false\" to allocate buffers on-the-flight instead of pre-generated cache\n */\nObject.defineProperty(generate, 'cacheNumbers', {\n  get () {\n    return writeNumber === writeNumberCached\n  },\n  set (value) {\n    if (value) {\n      if (!numCache || Object.keys(numCache).length === 0) toGenerate = true\n      writeNumber = writeNumberCached\n    } else {\n      toGenerate = false\n      writeNumber = writeNumberGenerated\n    }\n  }\n})\n\nfunction uncork (stream) {\n  stream.uncork()\n}\n\nfunction connect (packet, stream, opts) {\n  const settings = packet || {}\n  const protocolId = settings.protocolId || 'MQTT'\n  let protocolVersion = settings.protocolVersion || 4\n  const will = settings.will\n  let clean = settings.clean\n  const keepalive = settings.keepalive || 0\n  const clientId = settings.clientId || ''\n  const username = settings.username\n  const password = settings.password\n  /* mqtt5 new oprions */\n  const properties = settings.properties\n\n  if (clean === undefined) clean = true\n\n  let length = 0\n\n  // Must be a string and non-falsy\n  if (!protocolId ||\n     (typeof protocolId !== 'string' && !Buffer.isBuffer(protocolId))) {\n    stream.emit('error', new Error('Invalid protocolId'))\n    return false\n  } else length += protocolId.length + 2\n\n  // Must be 3 or 4 or 5\n  if (protocolVersion !== 3 && protocolVersion !== 4 && protocolVersion !== 5) {\n    stream.emit('error', new Error('Invalid protocol version'))\n    return false\n  } else length += 1\n\n  // ClientId might be omitted in 3.1.1 and 5, but only if cleanSession is set to 1\n  if ((typeof clientId === 'string' || Buffer.isBuffer(clientId)) &&\n     (clientId || protocolVersion >= 4) && (clientId || clean)) {\n    length += Buffer.byteLength(clientId) + 2\n  } else {\n    if (protocolVersion < 4) {\n      stream.emit('error', new Error('clientId must be supplied before 3.1.1'))\n      return false\n    }\n    if ((clean * 1) === 0) {\n      stream.emit('error', new Error('clientId must be given if cleanSession set to 0'))\n      return false\n    }\n  }\n\n  // Must be a two byte number\n  if (typeof keepalive !== 'number' ||\n      keepalive < 0 ||\n      keepalive > 65535 ||\n      keepalive % 1 !== 0) {\n    stream.emit('error', new Error('Invalid keepalive'))\n    return false\n  } else length += 2\n\n  // Connect flags\n  length += 1\n\n  // Properties\n  if (protocolVersion === 5) {\n    var propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // If will exists...\n  if (will) {\n    // It must be an object\n    if (typeof will !== 'object') {\n      stream.emit('error', new Error('Invalid will'))\n      return false\n    }\n    // It must have topic typeof string\n    if (!will.topic || typeof will.topic !== 'string') {\n      stream.emit('error', new Error('Invalid will topic'))\n      return false\n    } else {\n      length += Buffer.byteLength(will.topic) + 2\n    }\n\n    // Payload\n    length += 2 // payload length\n    if (will.payload) {\n      if (will.payload.length >= 0) {\n        if (typeof will.payload === 'string') {\n          length += Buffer.byteLength(will.payload)\n        } else {\n          length += will.payload.length\n        }\n      } else {\n        stream.emit('error', new Error('Invalid will payload'))\n        return false\n      }\n    }\n    // will properties\n    var willProperties = {}\n    if (protocolVersion === 5) {\n      willProperties = getProperties(stream, will.properties)\n      if (!willProperties) { return false }\n      length += willProperties.length\n    }\n  }\n\n  // Username\n  let providedUsername = false\n  if (username != null) {\n    if (isStringOrBuffer(username)) {\n      providedUsername = true\n      length += Buffer.byteLength(username) + 2\n    } else {\n      stream.emit('error', new Error('Invalid username'))\n      return false\n    }\n  }\n\n  // Password\n  if (password != null) {\n    if (!providedUsername) {\n      stream.emit('error', new Error('Username is required to use password'))\n      return false\n    }\n\n    if (isStringOrBuffer(password)) {\n      length += byteLength(password) + 2\n    } else {\n      stream.emit('error', new Error('Invalid password'))\n      return false\n    }\n  }\n\n  // Generate header\n  stream.write(protocol.CONNECT_HEADER)\n\n  // Generate length\n  writeVarByteInt(stream, length)\n\n  // Generate protocol ID\n  writeStringOrBuffer(stream, protocolId)\n\n  if (settings.bridgeMode) {\n    protocolVersion += 128\n  }\n\n  stream.write(\n    protocolVersion === 131\n      ? protocol.VERSION131\n      : protocolVersion === 132\n        ? protocol.VERSION132\n        : protocolVersion === 4\n          ? protocol.VERSION4\n          : protocolVersion === 5\n            ? protocol.VERSION5\n            : protocol.VERSION3\n  )\n\n  // Connect flags\n  let flags = 0\n  flags |= (username != null) ? protocol.USERNAME_MASK : 0\n  flags |= (password != null) ? protocol.PASSWORD_MASK : 0\n  flags |= (will && will.retain) ? protocol.WILL_RETAIN_MASK : 0\n  flags |= (will && will.qos) ? will.qos << protocol.WILL_QOS_SHIFT : 0\n  flags |= will ? protocol.WILL_FLAG_MASK : 0\n  flags |= clean ? protocol.CLEAN_SESSION_MASK : 0\n\n  stream.write(Buffer.from([flags]))\n\n  // Keepalive\n  writeNumber(stream, keepalive)\n\n  // Properties\n  if (protocolVersion === 5) {\n    propertiesData.write()\n  }\n\n  // Client ID\n  writeStringOrBuffer(stream, clientId)\n\n  // Will\n  if (will) {\n    if (protocolVersion === 5) {\n      willProperties.write()\n    }\n    writeString(stream, will.topic)\n    writeStringOrBuffer(stream, will.payload)\n  }\n\n  // Username and password\n  if (username != null) {\n    writeStringOrBuffer(stream, username)\n  }\n  if (password != null) {\n    writeStringOrBuffer(stream, password)\n  }\n  // This is a small packet that happens only once on a stream\n  // We assume the stream is always free to receive more data after this\n  return true\n}\n\nfunction connack (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const rc = version === 5 ? settings.reasonCode : settings.returnCode\n  const properties = settings.properties\n  let length = 2 // length of rc and sessionHeader\n\n  // Check return code\n  if (typeof rc !== 'number') {\n    stream.emit('error', new Error('Invalid return code'))\n    return false\n  }\n  // mqtt5 properties\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  stream.write(protocol.CONNACK_HEADER)\n  // length\n  writeVarByteInt(stream, length)\n  stream.write(settings.sessionPresent ? protocol.SESSIONPRESENT_HEADER : zeroBuf)\n\n  stream.write(Buffer.from([rc]))\n  if (propertiesData != null) {\n    propertiesData.write()\n  }\n  return true\n}\n\nfunction publish (packet, stream, opts) {\n  debug('publish: packet: %o', packet)\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const qos = settings.qos || 0\n  const retain = settings.retain ? protocol.RETAIN_MASK : 0\n  const topic = settings.topic\n  const payload = settings.payload || empty\n  const id = settings.messageId\n  const properties = settings.properties\n\n  let length = 0\n\n  // Topic must be a non-empty string or Buffer\n  if (typeof topic === 'string') length += Buffer.byteLength(topic) + 2\n  else if (Buffer.isBuffer(topic)) length += topic.length + 2\n  else {\n    stream.emit('error', new Error('Invalid topic'))\n    return false\n  }\n\n  // Get the payload length\n  if (!Buffer.isBuffer(payload)) length += Buffer.byteLength(payload)\n  else length += payload.length\n\n  // Message ID must a number if qos > 0\n  if (qos && typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  } else if (qos) length += 2\n\n  // mqtt5 properties\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.PUBLISH_HEADER[qos][settings.dup ? 1 : 0][retain ? 1 : 0])\n\n  // Remaining length\n  writeVarByteInt(stream, length)\n\n  // Topic\n  writeNumber(stream, byteLength(topic))\n  stream.write(topic)\n\n  // Message ID\n  if (qos > 0) writeNumber(stream, id)\n\n  // Properties\n  if (propertiesData != null) {\n    propertiesData.write()\n  }\n\n  // Payload\n  debug('publish: payload: %o', payload)\n  return stream.write(payload)\n}\n\n/* Puback, pubrec, pubrel and pubcomp */\nfunction confirmation (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const type = settings.cmd || 'puback'\n  const id = settings.messageId\n  const dup = (settings.dup && type === 'pubrel') ? protocol.DUP_MASK : 0\n  let qos = 0\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 3 : 2\n\n  if (type === 'pubrel') qos = 1\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    // Confirm should not add empty property length with no properties (rfc 3.4.2.2.1)\n    if (typeof properties === 'object') {\n      propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n      if (!propertiesData) { return false }\n      length += propertiesData.length\n    }\n  }\n\n  // Header\n  stream.write(protocol.ACKS[type][qos][dup][0])\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // reason code in header\n  if (version === 5) {\n    stream.write(Buffer.from([reasonCode]))\n  }\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n  return true\n}\n\nfunction subscribe (packet, stream, opts) {\n  debug('subscribe: packet: ')\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const id = settings.messageId\n  const subs = settings.subscriptions\n  const properties = settings.properties\n\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  } else length += 2\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Check subscriptions\n  if (typeof subs === 'object' && subs.length) {\n    for (let i = 0; i < subs.length; i += 1) {\n      const itopic = subs[i].topic\n      const iqos = subs[i].qos\n\n      if (typeof itopic !== 'string') {\n        stream.emit('error', new Error('Invalid subscriptions - invalid topic'))\n        return false\n      }\n      if (typeof iqos !== 'number') {\n        stream.emit('error', new Error('Invalid subscriptions - invalid qos'))\n        return false\n      }\n\n      if (version === 5) {\n        const nl = subs[i].nl || false\n        if (typeof nl !== 'boolean') {\n          stream.emit('error', new Error('Invalid subscriptions - invalid No Local'))\n          return false\n        }\n        const rap = subs[i].rap || false\n        if (typeof rap !== 'boolean') {\n          stream.emit('error', new Error('Invalid subscriptions - invalid Retain as Published'))\n          return false\n        }\n        const rh = subs[i].rh || 0\n        if (typeof rh !== 'number' || rh > 2) {\n          stream.emit('error', new Error('Invalid subscriptions - invalid Retain Handling'))\n          return false\n        }\n      }\n\n      length += Buffer.byteLength(itopic) + 2 + 1\n    }\n  } else {\n    stream.emit('error', new Error('Invalid subscriptions'))\n    return false\n  }\n\n  // Generate header\n  debug('subscribe: writing to stream: %o', protocol.SUBSCRIBE_HEADER)\n  stream.write(protocol.SUBSCRIBE_HEADER[1][dup ? 1 : 0][0])\n\n  // Generate length\n  writeVarByteInt(stream, length)\n\n  // Generate message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  let result = true\n\n  // Generate subs\n  for (const sub of subs) {\n    const jtopic = sub.topic\n    const jqos = sub.qos\n    const jnl = +sub.nl\n    const jrap = +sub.rap\n    const jrh = sub.rh\n    let joptions\n\n    // Write topic string\n    writeString(stream, jtopic)\n\n    // options process\n    joptions = protocol.SUBSCRIBE_OPTIONS_QOS[jqos]\n    if (version === 5) {\n      joptions |= jnl ? protocol.SUBSCRIBE_OPTIONS_NL : 0\n      joptions |= jrap ? protocol.SUBSCRIBE_OPTIONS_RAP : 0\n      joptions |= jrh ? protocol.SUBSCRIBE_OPTIONS_RH[jrh] : 0\n    }\n    // Write options\n    result = stream.write(Buffer.from([joptions]))\n  }\n\n  return result\n}\n\nfunction suback (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const granted = settings.granted\n  const properties = settings.properties\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  } else length += 2\n\n  // Check granted qos vector\n  if (typeof granted === 'object' && granted.length) {\n    for (let i = 0; i < granted.length; i += 1) {\n      if (typeof granted[i] !== 'number') {\n        stream.emit('error', new Error('Invalid qos vector'))\n        return false\n      }\n      length += 1\n    }\n  } else {\n    stream.emit('error', new Error('Invalid qos vector'))\n    return false\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // header\n  stream.write(protocol.SUBACK_HEADER)\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  return stream.write(Buffer.from(granted))\n}\n\nfunction unsubscribe (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const unsubs = settings.unsubscriptions\n  const properties = settings.properties\n\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  } else {\n    length += 2\n  }\n  // Check unsubs\n  if (typeof unsubs === 'object' && unsubs.length) {\n    for (let i = 0; i < unsubs.length; i += 1) {\n      if (typeof unsubs[i] !== 'string') {\n        stream.emit('error', new Error('Invalid unsubscriptions'))\n        return false\n      }\n      length += Buffer.byteLength(unsubs[i]) + 2\n    }\n  } else {\n    stream.emit('error', new Error('Invalid unsubscriptions'))\n    return false\n  }\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.UNSUBSCRIBE_HEADER[1][dup ? 1 : 0][0])\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  // Unsubs\n  let result = true\n  for (let j = 0; j < unsubs.length; j++) {\n    result = writeString(stream, unsubs[j])\n  }\n\n  return result\n}\n\nfunction unsuback (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const granted = settings.granted\n  const properties = settings.properties\n  const type = settings.cmd\n  const qos = 0\n\n  let length = 2\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  }\n\n  // Check granted\n  if (version === 5) {\n    if (typeof granted === 'object' && granted.length) {\n      for (let i = 0; i < granted.length; i += 1) {\n        if (typeof granted[i] !== 'number') {\n          stream.emit('error', new Error('Invalid qos vector'))\n          return false\n        }\n        length += 1\n      }\n    } else {\n      stream.emit('error', new Error('Invalid qos vector'))\n      return false\n    }\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.ACKS[type][qos][dup][0])\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  // payload\n  if (version === 5) {\n    stream.write(Buffer.from(granted))\n  }\n  return true\n}\n\nfunction emptyPacket (packet, stream, opts) {\n  return stream.write(protocol.EMPTY[packet.cmd])\n}\n\nfunction disconnect (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 1 : 0\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(Buffer.from([protocol.codes.disconnect << 4]))\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // reason code in header\n  if (version === 5) {\n    stream.write(Buffer.from([reasonCode]))\n  }\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  return true\n}\n\nfunction auth (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 1 : 0\n\n  if (version !== 5) stream.emit('error', new Error('Invalid mqtt version for auth packet'))\n\n  // properies mqtt 5\n  const propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n  if (!propertiesData) { return false }\n  length += propertiesData.length\n\n  // Header\n  stream.write(Buffer.from([protocol.codes.auth << 4]))\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // reason code in header\n  stream.write(Buffer.from([reasonCode]))\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n  return true\n}\n\n/**\n * writeVarByteInt - write an MQTT style variable byte integer to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <Number> length - length (>0)\n * @returns <Number> number of bytes written\n *\n * @api private\n */\n\nconst varByteIntCache = {}\nfunction writeVarByteInt (stream, num) {\n  if (num > protocol.VARBYTEINT_MAX) {\n    stream.emit('error', new Error(`Invalid variable byte integer: ${num}`))\n    return false\n  }\n\n  let buffer = varByteIntCache[num]\n\n  if (!buffer) {\n    buffer = genBufVariableByteInt(num)\n    if (num < 16384) varByteIntCache[num] = buffer\n  }\n  debug('writeVarByteInt: writing to stream: %o', buffer)\n  return stream.write(buffer)\n}\n\n/**\n * writeString - write a utf8 string to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> string - string to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\n\nfunction writeString (stream, string) {\n  const strlen = Buffer.byteLength(string)\n  writeNumber(stream, strlen)\n\n  debug('writeString: %s', string)\n  return stream.write(string, 'utf8')\n}\n\n/**\n * writeStringPair - write a utf8 string pairs to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <String> name - string name to write\n * @param <String> value - string value to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\nfunction writeStringPair (stream, name, value) {\n  writeString(stream, name)\n  writeString(stream, value)\n}\n\n/**\n * writeNumber - write a two byte number to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> number - number to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\nfunction writeNumberCached (stream, number) {\n  debug('writeNumberCached: number: %d', number)\n  debug('writeNumberCached: %o', numCache[number])\n  return stream.write(numCache[number])\n}\nfunction writeNumberGenerated (stream, number) {\n  const generatedNumber = generateNumber(number)\n  debug('writeNumberGenerated: %o', generatedNumber)\n  return stream.write(generatedNumber)\n}\nfunction write4ByteNumber (stream, number) {\n  const generated4ByteBuffer = generate4ByteBuffer(number)\n  debug('write4ByteNumber: %o', generated4ByteBuffer)\n  return stream.write(generated4ByteBuffer)\n}\n/**\n * writeStringOrBuffer - write a String or Buffer with the its length prefix\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> toWrite - String or Buffer\n * @return <Number> number of bytes written\n */\nfunction writeStringOrBuffer (stream, toWrite) {\n  if (typeof toWrite === 'string') {\n    writeString(stream, toWrite)\n  } else if (toWrite) {\n    writeNumber(stream, toWrite.length)\n    stream.write(toWrite)\n  } else writeNumber(stream, 0)\n}\n\nfunction getProperties (stream, properties) {\n  /* connect properties */\n  if (typeof properties !== 'object' || properties.length != null) {\n    return {\n      length: 1,\n      write () {\n        writeProperties(stream, {}, 0)\n      }\n    }\n  }\n  let propertiesLength = 0\n  function getLengthProperty (name, value) {\n    const type = protocol.propertiesTypes[name]\n    let length = 0\n    switch (type) {\n      case 'byte': {\n        if (typeof value !== 'boolean') {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 1\n        break\n      }\n      case 'int8': {\n        if (typeof value !== 'number' || value < 0 || value > 0xff) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 1\n        break\n      }\n      case 'binary': {\n        if (value && value === null) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + Buffer.byteLength(value) + 2\n        break\n      }\n      case 'int16': {\n        if (typeof value !== 'number' || value < 0 || value > 0xffff) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 2\n        break\n      }\n      case 'int32': {\n        if (typeof value !== 'number' || value < 0 || value > 0xffffffff) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 4\n        break\n      }\n      case 'var': {\n        // var byte integer is max 24 bits packed in 32 bits\n        if (typeof value !== 'number' || value < 0 || value > 0x0fffffff) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + Buffer.byteLength(genBufVariableByteInt(value))\n        break\n      }\n      case 'string': {\n        if (typeof value !== 'string') {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 2 + Buffer.byteLength(value.toString())\n        break\n      }\n      case 'pair': {\n        if (typeof value !== 'object') {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += Object.getOwnPropertyNames(value).reduce((result, name) => {\n          const currentValue = value[name]\n          if (Array.isArray(currentValue)) {\n            result += currentValue.reduce((currentLength, value) => {\n              currentLength += 1 + 2 + Buffer.byteLength(name.toString()) + 2 + Buffer.byteLength(value.toString())\n              return currentLength\n            }, 0)\n          } else {\n            result += 1 + 2 + Buffer.byteLength(name.toString()) + 2 + Buffer.byteLength(value[name].toString())\n          }\n          return result\n        }, 0)\n        break\n      }\n      default: {\n        stream.emit('error', new Error(`Invalid property ${name}: ${value}`))\n        return false\n      }\n    }\n    return length\n  }\n  if (properties) {\n    for (const propName in properties) {\n      let propLength = 0\n      let propValueLength = 0\n      const propValue = properties[propName]\n      if (Array.isArray(propValue)) {\n        for (let valueIndex = 0; valueIndex < propValue.length; valueIndex++) {\n          propValueLength = getLengthProperty(propName, propValue[valueIndex])\n          if (!propValueLength) { return false }\n          propLength += propValueLength\n        }\n      } else {\n        propValueLength = getLengthProperty(propName, propValue)\n        if (!propValueLength) { return false }\n        propLength = propValueLength\n      }\n      if (!propLength) return false\n      propertiesLength += propLength\n    }\n  }\n  const propertiesLengthLength = Buffer.byteLength(genBufVariableByteInt(propertiesLength))\n\n  return {\n    length: propertiesLengthLength + propertiesLength,\n    write () {\n      writeProperties(stream, properties, propertiesLength)\n    }\n  }\n}\n\nfunction getPropertiesByMaximumPacketSize (stream, properties, opts, length) {\n  const mayEmptyProps = ['reasonString', 'userProperties']\n  const maximumPacketSize = opts && opts.properties && opts.properties.maximumPacketSize ? opts.properties.maximumPacketSize : 0\n\n  let propertiesData = getProperties(stream, properties)\n  if (maximumPacketSize) {\n    while (length + propertiesData.length > maximumPacketSize) {\n      const currentMayEmptyProp = mayEmptyProps.shift()\n      if (currentMayEmptyProp && properties[currentMayEmptyProp]) {\n        delete properties[currentMayEmptyProp]\n        propertiesData = getProperties(stream, properties)\n      } else {\n        return false\n      }\n    }\n  }\n  return propertiesData\n}\n\nfunction writeProperty (stream, propName, value) {\n  const type = protocol.propertiesTypes[propName]\n  switch (type) {\n    case 'byte': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      stream.write(Buffer.from([+value]))\n      break\n    }\n    case 'int8': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      stream.write(Buffer.from([value]))\n      break\n    }\n    case 'binary': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeStringOrBuffer(stream, value)\n      break\n    }\n    case 'int16': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeNumber(stream, value)\n      break\n    }\n    case 'int32': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      write4ByteNumber(stream, value)\n      break\n    }\n    case 'var': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeVarByteInt(stream, value)\n      break\n    }\n    case 'string': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeString(stream, value)\n      break\n    }\n    case 'pair': {\n      Object.getOwnPropertyNames(value).forEach(name => {\n        const currentValue = value[name]\n        if (Array.isArray(currentValue)) {\n          currentValue.forEach(value => {\n            stream.write(Buffer.from([protocol.properties[propName]]))\n            writeStringPair(stream, name.toString(), value.toString())\n          })\n        } else {\n          stream.write(Buffer.from([protocol.properties[propName]]))\n          writeStringPair(stream, name.toString(), currentValue.toString())\n        }\n      })\n      break\n    }\n    default: {\n      stream.emit('error', new Error(`Invalid property ${propName} value: ${value}`))\n      return false\n    }\n  }\n}\n\nfunction writeProperties (stream, properties, propertiesLength) {\n  /* write properties to stream */\n  writeVarByteInt(stream, propertiesLength)\n  for (const propName in properties) {\n    if (Object.prototype.hasOwnProperty.call(properties, propName) && properties[propName] !== null) {\n      const value = properties[propName]\n      if (Array.isArray(value)) {\n        for (let valueIndex = 0; valueIndex < value.length; valueIndex++) {\n          writeProperty(stream, propName, value[valueIndex])\n        }\n      } else {\n        writeProperty(stream, propName, value)\n      }\n    }\n  }\n}\n\nfunction byteLength (bufOrString) {\n  if (!bufOrString) return 0\n  else if (bufOrString instanceof Buffer) return bufOrString.length\n  else return Buffer.byteLength(bufOrString)\n}\n\nfunction isStringOrBuffer (field) {\n  return typeof field === 'string' || field instanceof Buffer\n}\n\nmodule.exports = generate\n\n};"],
"names":["shadow$provide","global","require","module","exports","generate","packet","stream","opts","debug","cork","nextTick","uncork","toGenerate","generateCache","cmd","connect","version","protocolVersion","settings","rc","reasonCode","returnCode","properties","length","emit","Error","propertiesData","getProperties","write","protocol","CONNACK_HEADER","writeVarByteInt","sessionPresent","SESSIONPRESENT_HEADER","zeroBuf","Buffer","from","qos","retain","RETAIN_MASK","topic","payload","empty","id","messageId","byteLength","isBuffer","PUBLISH_HEADER","dup","writeNumber","type","DUP_MASK","getPropertiesByMaximumPacketSize","ACKS","subscribe","suback","unsubscribe","unsuback","EMPTY","codes","disconnect","auth","protocolId","will","clean","keepalive","clientId","username","password","undefined","willProperties","providedUsername","isStringOrBuffer","CONNECT_HEADER","writeStringOrBuffer","bridgeMode","VERSION131","VERSION132","VERSION4","VERSION5","VERSION3","flags","USERNAME_MASK","PASSWORD_MASK","WILL_RETAIN_MASK","WILL_QOS_SHIFT","WILL_FLAG_MASK","CLEAN_SESSION_MASK","writeString","subs","subscriptions","i","itopic","iqos","nl","rap","rh","SUBSCRIBE_HEADER","result","sub","jqos","jnl","jrap","jrh","joptions","SUBSCRIBE_OPTIONS_QOS","SUBSCRIBE_OPTIONS_NL","SUBSCRIBE_OPTIONS_RAP","SUBSCRIBE_OPTIONS_RH","granted","SUBACK_HEADER","unsubs","unsubscriptions","UNSUBSCRIBE_HEADER","j","num","VARBYTEINT_MAX","buffer","varByteIntCache","genBufVariableByteInt","string","strlen","writeStringPair","name","value","writeNumberCached","number","numCache","writeNumberGenerated","generatedNumber","generateNumber","write4ByteNumber","generated4ByteBuffer","generate4ByteBuffer","toWrite","getLengthProperty","propertiesTypes","toString","Object","getOwnPropertyNames","reduce","currentValue","Array","isArray","currentLength","writeProperties","propertiesLength","propName","propLength","propValueLength","propValue","valueIndex","propertiesLengthLength","mayEmptyProps","maximumPacketSize","currentMayEmptyProp","shift","writeProperty","forEach","prototype","hasOwnProperty","call","bufOrString","field","allocUnsafe","numbers","cache","defineProperty","get","set","keys"]
}
